import{S as ft,i as pt,s as bt,e as c,c as i,a as d,d as o,b as e,g as F,E as tt,v as mt,t as U,k as _,h as C,m as y,J as t,Y as Q,K,G as ht,f as $}from"../../chunks/index-0296d445.js";function vt(k){let n,f,p,u,s,a,g,x,b,E,h,T,l,D,j,L,I,V,R,P,m,N,A,H;return{c(){n=c("h1"),f=U("Log in"),p=_(),u=c("br"),s=_(),a=c("form"),g=c("div"),x=c("label"),b=U("Username"),E=_(),h=c("input"),T=_(),l=c("div"),D=c("label"),j=U("Password"),L=_(),I=c("input"),V=_(),R=c("br"),P=_(),m=c("button"),N=U("login"),this.h()},l(r){n=i(r,"H1",{class:!0});var v=d(n);f=C(v,"Log in"),v.forEach(o),p=y(r),u=i(r,"BR",{}),s=y(r),a=i(r,"FORM",{id:!0,class:!0});var w=d(a);g=i(w,"DIV",{class:!0});var B=d(g);x=i(B,"LABEL",{for:!0,class:!0});var X=d(x);b=C(X,"Username"),X.forEach(o),E=y(B),h=i(B,"INPUT",{type:!0,class:!0}),B.forEach(o),T=y(w),l=i(w,"DIV",{class:!0});var S=d(l);D=i(S,"LABEL",{for:!0,class:!0});var O=d(D);j=C(O,"Password"),O.forEach(o),L=y(S),I=i(S,"INPUT",{type:!0,class:!0}),V=y(S),R=i(S,"BR",{}),S.forEach(o),P=y(w),m=i(w,"BUTTON",{type:!0,class:!0});var Y=d(m);N=C(Y,"login"),Y.forEach(o),w.forEach(o),this.h()},h(){e(n,"class","mx-auto center text-center"),e(x,"for","text"),e(x,"class","form-label text-left"),e(h,"type","text"),e(h,"class","form-text form-control"),e(g,"class","mb-3 text-left"),e(D,"for","exampleInputPassword1"),e(D,"class","form-label"),e(I,"type","password"),e(I,"class","form-control"),e(l,"class","mb-3"),e(m,"type","button"),e(m,"class","btn"),e(a,"id","form"),e(a,"class","form my-3 w-50 text-left mx-auto")},m(r,v){F(r,n,v),t(n,f),F(r,p,v),F(r,u,v),F(r,s,v),F(r,a,v),t(a,g),t(g,x),t(x,b),t(g,E),t(g,h),Q(h,k[0]),t(a,T),t(a,l),t(l,D),t(D,j),t(l,L),t(l,I),Q(I,k[1]),t(l,V),t(l,R),t(a,P),t(a,m),t(m,N),A||(H=[K(h,"input",k[6]),K(I,"input",k[7]),K(m,"click",k[3])],A=!0)},p(r,v){v&1&&h.value!==r[0]&&Q(h,r[0]),v&2&&I.value!==r[1]&&Q(I,r[1])},d(r){r&&o(n),r&&o(p),r&&o(u),r&&o(s),r&&o(a),A=!1,ht(H)}}}function _t(k){let n,f,p,u,s,a,g,x,b,E,h,T,l,D,j,L,I,V,R,P,m,N,A,H,r,v,w,B,X,S,O,Y,Z,et;return{c(){n=c("center"),f=c("h1"),p=U("You are authenticated!"),u=_(),s=c("div"),a=c("button"),g=U("Launch demo modal"),x=_(),b=c("div"),E=c("div"),h=c("div"),T=c("div"),l=c("h5"),D=U("Modal title"),j=_(),L=c("button"),I=_(),V=c("div"),R=U("..."),P=_(),m=c("div"),N=c("button"),A=U("Close"),H=_(),r=c("button"),v=U("Save changes"),w=_(),B=c("button"),X=U("whoami"),S=_(),O=c("button"),Y=U("logout"),this.h()},l(J){n=i(J,"CENTER",{});var q=d(n);f=i(q,"H1",{});var lt=d(f);p=C(lt,"You are authenticated!"),lt.forEach(o),u=y(q),s=i(q,"DIV",{});var M=d(s);a=i(M,"BUTTON",{type:!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0});var at=d(a);g=C(at,"Launch demo modal"),at.forEach(o),x=y(M),b=i(M,"DIV",{class:!0,style:!0,id:!0,tabindex:!0,"aria-labelledby":!0,"aria-hidden":!0,"data-backdrop":!0});var st=d(b);E=i(st,"DIV",{class:!0,style:!0});var ot=d(E);h=i(ot,"DIV",{class:!0});var G=d(h);T=i(G,"DIV",{class:!0});var W=d(T);l=i(W,"H5",{class:!0,id:!0});var rt=d(l);D=C(rt,"Modal title"),rt.forEach(o),j=y(W),L=i(W,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"aria-label":!0}),d(L).forEach(o),W.forEach(o),I=y(G),V=i(G,"DIV",{class:!0});var nt=d(V);R=C(nt,"..."),nt.forEach(o),P=y(G),m=i(G,"DIV",{class:!0});var z=d(m);N=i(z,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0});var ct=d(N);A=C(ct,"Close"),ct.forEach(o),H=y(z),r=i(z,"BUTTON",{type:!0,class:!0});var it=d(r);v=C(it,"Save changes"),it.forEach(o),z.forEach(o),G.forEach(o),ot.forEach(o),st.forEach(o),w=y(M),B=i(M,"BUTTON",{type:!0,class:!0});var ut=d(B);X=C(ut,"whoami"),ut.forEach(o),S=y(M),O=i(M,"BUTTON",{type:!0,class:!0});var dt=d(O);Y=C(dt,"logout"),dt.forEach(o),M.forEach(o),q.forEach(o),this.h()},h(){e(a,"type","button"),e(a,"class","btn btn-primary"),e(a,"data-bs-toggle","modal"),e(a,"data-bs-target","#exampleModal"),e(l,"class","modal-title"),e(l,"id","exampleModalLabel"),e(L,"type","button"),e(L,"class","btn-close"),e(L,"data-bs-dismiss","modal"),e(L,"aria-label","Close"),e(T,"class","modal-header"),e(V,"class","modal-body"),e(N,"type","button"),e(N,"class","btn btn-secondary"),e(N,"data-bs-dismiss","modal"),e(r,"type","button"),e(r,"class","btn btn-primary"),e(m,"class","modal-footer"),e(h,"class","modal-content"),e(E,"class","modal-dialog"),$(E,"margin-top","80px"),$(E,"margin-bottom","40px"),e(b,"class","modal fade"),$(b,"position","abssolute"),e(b,"id","exampleModal"),e(b,"tabindex","-1"),e(b,"aria-labelledby","exampleModalLabel"),e(b,"aria-hidden","true"),e(b,"data-backdrop","false"),e(B,"type","button"),e(B,"class","btn"),e(O,"type","button"),e(O,"class","btn")},m(J,q){F(J,n,q),t(n,f),t(f,p),t(n,u),t(n,s),t(s,a),t(a,g),t(s,x),t(s,b),t(b,E),t(E,h),t(h,T),t(T,l),t(l,D),t(T,j),t(T,L),t(h,I),t(h,V),t(V,R),t(h,P),t(h,m),t(m,N),t(N,A),t(m,H),t(m,r),t(r,v),t(s,w),t(s,B),t(B,X),t(s,S),t(s,O),t(O,Y),Z||(et=[K(B,"click",k[4]),K(O,"click",k[5])],Z=!0)},p:tt,d(J){J&&o(n),Z=!1,ht(et)}}}function yt(k){let n;function f(s,a){return s[2]?_t:vt}let p=f(k),u=p(k);return{c(){n=c("div"),u.c(),this.h()},l(s){n=i(s,"DIV",{class:!0});var a=d(n);u.l(a),a.forEach(o),this.h()},h(){e(n,"class","container svelte-x3itve")},m(s,a){F(s,n,a),u.m(n,null)},p(s,[a]){p===(p=f(s))&&u?u.p(s,a):(u.d(1),u=p(s),u&&(u.c(),u.m(n,null)))},i:tt,o:tt,d(s){s&&o(n),u.d()}}}function gt(k,n,f){let p,u,s,a=!1;mt(()=>{fetch("http://localhost:5000/api/getsession",{credentials:"include"}).then(l=>l.json()).then(l=>{console.log(l),l.login==!0?f(2,a=!0):(f(2,a=!1),g())}).catch(l=>{console.log(l)})});const g=()=>{fetch("http://localhost:5000/api/getcsrf",{credentials:"include"}).then(l=>{s=l.headers.get(["X-CSRFToken"])}).catch(l=>{console.log(l)})},x=()=>{fetch("http://localhost:5000/api/login",{method:"POST",headers:{Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({username:p,password:u})}).then(l=>l.json()).then(l=>{console.log(l),l.login==!0&&f(2,a=!0)}).catch(l=>{console.log(l)})},b=()=>{fetch("http://localhost:5000/api/data",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include"}).then(l=>l.json()).then(l=>{console.log(l),alert(`Welcome, ${l.username}!`)}).catch(l=>{console.log(l)})},E=()=>{fetch("http://localhost:5000/api/logout",{credentials:"include"}).then(()=>{f(2,a=!1)}).catch(l=>{console.log(l)})};function h(){p=this.value,f(0,p)}function T(){u=this.value,f(1,u)}return[p,u,a,x,b,E,h,T]}class Tt extends ft{constructor(n){super();pt(this,n,gt,yt,bt,{})}}export{Tt as default};
